- model_class = Order
.page-header
  %h1
    %span.glyphicon.glyphicon-ok
    =t '.title', :default => model_class.model_name.human.pluralize.titleize

.panel.panel-default{style:'max-width: 600px'}
  .panel-heading
    %span.panel-title
      Filter
  .panel-body
    = search_form_for @q, url: search_orders_path, html: {method: :post } do |f|
      .form-group
        = f.select :id_eq, options_from_collection_for_select(User.all,"id","name", @q.id_eq), {include_blank: "Benutzer..."}, {class: "form-control", onchange: "this.form.submit();"}
      .input-group
        = f.text_field :id_eq, placeholder: 'Suche', class:'form-control'
        %span.input-group-btn
          %button.btn.btn-default{type: "submit"}
            %span.glyphicon.glyphicon-search
      .input-group
        = f.date_select :created_at, {include_blank: true}, {class: "form-control"}

%table.table.table-striped
  %thead
    %tr
      %th= User.human_attribute_name(:name)
      %th=t '.column.amount'
      %th=t '.column.quantity'
      %th=t 'helpers.created_at'
      %th=t 'actions', :default => t("helpers.actions")
  %tbody
    - @orders.each do |order|
      %tr
        %td= order.user.name
        %td
          = number_to_currency order.booking.amount, precision: 2
        %td
          - order.order_items.each do |item|
            #{item.amount}x #{item.delivery.product.title}
            %br

        %td=l order.created_at.localtime, format: :long
        %td= link_to t('.destroy', :default => t("helpers.links.destroy")), order_path(order), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, class:'btn btn-sm btn-danger'

%div.pagination-centered
  - if not @orders.empty?
    = will_paginate @orders, {next_label: t('will_paginate.next_level'), previous_label: t('will_paginate.previous_level'), renderer: BootstrapPagination::Rails}
